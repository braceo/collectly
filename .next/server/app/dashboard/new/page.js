(()=>{var e={};e.id=215,e.ids=[215],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},2592:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(482),i=r(9108),a=r(2563),n=r.n(a),l=r(8300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["dashboard",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3730)),"/workspaces/collectly/src/app/dashboard/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1342)),"/workspaces/collectly/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/workspaces/collectly/src/app/dashboard/new/page.tsx"],u="/dashboard/new/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/dashboard/new/page",pathname:"/dashboard/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7569:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},6258:(e,t,r)=>{Promise.resolve().then(r.bind(r,2435))},3792:()=>{},2435:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(5344),i=r(3729),a=r(3890),n=r(8428);function l(){let e=(0,i.useMemo)(()=>(0,a.W)(),[]),t=(0,n.useRouter)(),[r,l]=(0,i.useState)([]),[o,d]=(0,i.useState)(!1),[c,u]=(0,i.useState)(null);async function m(r){u(null),d(!0);let s=String(r.get("title")||"").trim(),i=String(r.get("description")||"").trim(),a=String(r.get("price")||"0").trim(),n=Number(r.get("category_id")||0),l=Number(r.get("stock_quantity")||0),o="on"===r.get("in_stock");if(!s)return u("Title is required."),d(!1);if(!n)return u("Pick a category."),d(!1);let c=Math.round(100*Number(a));if(!Number.isFinite(c)||c<0)return u("Price must be valid."),d(!1);let{data:{user:m},error:p}=await e.auth.getUser();if(p||!m){u("Not authenticated."),d(!1);return}let{error:x}=await e.from("products").insert({seller_id:m.id,title:s,description:i,price_cents:c,category_id:n,stock_quantity:l,in_stock:o});if(d(!1),x){console.error(x),u(x.message);return}alert("Product created."),t.push("/dashboard")}return(0,i.useEffect)(()=>{(async()=>{let{data:t,error:r}=await e.from("categories").select("id,name").order("name",{ascending:!0});r?(console.error(r),u("Failed to load categories.")):l(t??[])})()},[e]),(0,s.jsxs)("form",{action:m,className:"space-y-4 bg-white rounded-2xl shadow p-6",children:[c&&s.jsx("div",{className:"text-sm text-red-600 border border-red-200 bg-red-50 rounded p-2",children:c}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title *"}),s.jsx("input",{name:"title",required:!0,className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g. Handmade mug"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),s.jsx("textarea",{name:"description",rows:4,className:"w-full border rounded-lg px-3 py-2",placeholder:"Short details..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price (\xa3)"}),s.jsx("input",{name:"price",type:"number",step:"0.01",min:"0",required:!0,className:"w-full border rounded-lg px-3 py-2",placeholder:"12.99"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),(0,s.jsxs)("select",{name:"category_id",required:!0,className:"w-full border rounded-lg px-3 py-2",children:[s.jsx("option",{value:"",children:"Select…"}),r.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Stock quantity"}),s.jsx("input",{name:"stock_quantity",type:"number",min:"0",defaultValue:0,className:"w-full border rounded-lg px-3 py-2"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 mt-6",children:[s.jsx("input",{name:"in_stock",type:"checkbox",defaultChecked:!0,className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"In stock"})]})]}),s.jsx("button",{type:"submit",disabled:o,className:"rounded-lg px-4 py-2 bg-black text-white disabled:opacity-50",children:o?"Saving…":"Create product"})]})}},3890:(e,t,r)=>{"use strict";r.d(t,{W:()=>i});var s=r(7435);let i=()=>(0,s.createBrowserSupabaseClient)()},3730:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(5036);let i=(0,r(6843).createProxy)(String.raw`/workspaces/collectly/src/app/dashboard/new/product-form.tsx`),{__esModule:a,$$typeof:n}=i,l=i.default;function o(){return(0,s.jsxs)("div",{className:"max-w-2xl",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Add a Product"}),s.jsx(l,{})]})}},1342:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,metadata:()=>i});var s=r(5036);r(5023);let i={title:"Collectly",description:"Seller-focused collection storefront"};function a({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{children:e})})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[22,407],()=>r(2592));module.exports=s})();